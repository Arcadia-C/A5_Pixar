<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>Pixar Visualization</title>
    <script src="plots/d3.v7.min.js"></script>
    <style>
      .reveal-container {
        margin-top: 40px;
      }

      .hover-bar {
        width: 100%;
        background-color: rgba(255, 255, 255, 0.12);
        color: white;
        font-size: 26px;
        font-weight: bold;
        text-align: center;
        padding: 20px;
        margin: 40px 0 10px 0;
        border-top: 2px solid white;
        border-bottom: 2px solid white;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .hover-bar:hover {
        background-color: rgba(255, 255, 255, 0.25);
      }

      .viz-wrapper {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.8s ease;
      }

      .viz-wrapper.revealed {
        max-height: 800px; /* Adjust based on graph size */
      }

      #tooltip {
        position: absolute;
        background: white;
        color: black;
        border: 1px solid #ccc;
        padding: 5px 10px;
        font-size: 12px;
        pointer-events: none;
        opacity: 0;
        border-radius: 4px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        pointer-events: auto;
      }

      /* Base slider styling */
      input[type="range"] {
        -webkit-appearance: none;
        width: 40%;
        height: 8px;
        border-radius: 5px;
        background: #ddd;
        outline: none;
      }

      /* Customize the track (for Chrome, Safari) */
      #boxWeight::-webkit-slider-runnable-track {
        background: green;
      }

      #openingWeight::-webkit-slider-runnable-track {
        background: green;
      }

      #rottenWeight::-webkit-slider-runnable-track {
        background: red;
      }

      #imdbWeight::-webkit-slider-runnable-track {
        background: yellow;
      }

      #metacriticWeight::-webkit-slider-runnable-track {
        background: orange;
      }

      #originalityWeight::-webkit-slider-runnable-track {
        background: purple;
      }

      #awardsWeight::-webkit-slider-runnable-track {
        background: blue;
      }

      /* Make thumbs stand out a bit */
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 14px;
        height: 14px;
        background: white;
        border: 2px solid #888;
        border-radius: 40%;
        cursor: pointer;
        margin-top: 0 px; /* centers thumb vertically */
      }
    .container {
      max-width: 90%;
      min-width: 900px;
      margin: 40px auto;
      padding: 20px;
    }
    
    .timeline-wrapper {
      position: relative;
      margin-bottom: 50px;
      height: 350px;
    }
    
    .timeline {
      position: absolute;
      bottom: 50px;
      left: 0;
      right: 0;
      height: 4px;
      background-color: #0061d5;
      border-radius: 2px;
    }
    
    .timeline-marker {
      position: absolute;
      bottom: 50px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: #ddd;
      transform: translate(-50%, -50%);
    }
    
    .timeline-label {
      position: absolute;
      bottom: 20px;
      transform: translateX(-50%);
      text-align: center;
      font-size: 12px;
      color: #666;
    }
    
    .cursor {
      position: absolute;
      bottom: 50px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background-color: #ff5722;
      transform: translate(-50%, -50%);
      z-index: 100;
      box-shadow: 0 0 0 4px rgba(255, 87, 34, 0.3);
    }
    
    .milestone-label {
      position: absolute;
      bottom: 300px;
      width: 300px;
      background-color: #ffffff;
      padding: 15px;
      border-radius: 8px;
      font-size: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transform: translateX(-50%);
      transition: opacity 0.5s ease;
      pointer-events: none;
      z-index: 50;
      border-left: 5px solid #ff5722;
    }
    
    .milestone-title {
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 8px;
      color: #0061d5;
    }
    
    /* Rectangular cards with character images and titles */
    .film-card {
      position: absolute;
      width: 140px;
      height: 200px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      opacity: 0;
      transform: translate(-50%, 0) scale(1);
      transition: opacity 0.5s ease, transform 0.5s ease;
      z-index: 10;
      bottom: 80px;
      border-top: 3px solid #0061d5;
    }
    
    .film-card.visible {
      opacity: 1;
    }
    
    .film-card.current {
      transform: translate(-50%, 0) scale(1);
      z-index: 20;
    }
    
    .film-card.past {
      transform: translate(-50%, 0) scale(0.3);
      z-index: 5;
    }
    
    .original-concept {
      border-top-color: #ff5722 !important;
    }
    
    .character-icon {
      width: 100%;
      aspect-ratio: 1 / 1;
      height: auto;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-color: #f0f0f0;
      position: relative;
    }
    
    .film-info {
      padding: 8px;
    }
    
    .film-title {
      font-weight: bold;
      font-size: 0.9rem;
      margin: 0 0 5px 0;
      line-height: 1.2;
      height: 2.4rem;
      overflow: hidden;
      text-align: center;
    }
    
    .film-year {
      font-size: 0.8rem;
      margin: 0;
      color: #666;
      text-align: center;
    }
    
    .film-rating {
      position: absolute;
      top: 5px;
      right: 5px;
      width: 25px;
      height: 25px;
      border-radius: 50%;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.6rem;
      font-weight: bold;
      z-index: 15;
      border: 2px solid white;
    }
    
    .controls {
      margin: 20px 0;
      text-align: center;
    }
    
    .controls button {
      padding: 8px 16px;
      background-color: #0061d5;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin: 0 5px;
      font-family: 'Montserrat', sans-serif;
    }
    
    .controls button:hover {
      background-color: #0052b3;
    }
    
    .tooltip {
      position: absolute;
      background-color: #fff;
      border-radius: 4px;
      padding: 8px 12px;
      font-size: 0.8rem;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      pointer-events: none;
      opacity: 0;
      z-index: 100;
      transition: opacity 0.3s ease;
    }
    
    .year-display {
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 15px;
    }
    </style>
  </head>

  <body>
    <div class="content">
      <h1>Has Pixar Lost Its Magic?</h1>
      <h3>
        Exploring the Evolution of Pixar Films and the Changing Landscape of
        Animated Storytelling.
      </h3>
      <div class="container">
        <div class="year-display">Year: <span id="current-year">1994</span></div>
        
        <div class="controls">
          <button id="start-animation">Start</button>
          <button id="reset-animation">Reset</button>
        </div>
        
        <div class="timeline-wrapper">
          <div class="timeline"></div>
          <div class="cursor"></div>
        </div>
        
        <div class="tooltip"></div>
      </div>
      <p>
        Not so long ago (in 1994 to be exact), on a hot day in California, there
        were four men having lunch at a frequented spot: The Hidden City Cafe.
        But this was no ordinary lunch. And they were no ordinary people. They
        were Pixar's directors and were brainstorming new ideas for their next
        movies. Given that they were wrapping up production on Toy Story (which
        would release the following year), they were buzzing with ideas of what
        to do next. From the small-scaled story of a Bug's Life to the gigantic
        tale of Monster's Inc, several narratives were born in the fabled "$2
        Billion Lunch Meeting".
      </p>
      <p>
        The last idea they came up with was WALL-E, which would release in 2008.
      </p>

      <div class="video-container">
        <iframe
          width="700"
          height="1700"
          src="https://www.youtube.com/embed/ggV082dBgcY"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        >
        </iframe>
      </div>

      <p>
        But there's a problem when it comes to this teaser trailer: doesn't it
        seem like everything after WALL-E was an afterthought?
      </p>
      <p>
        Thus, one way to divide the Pixar timeline are "pre-WALL-E" films and
        "post-WALL-E" films (with the dividing line being at 2008). Many people
        believe that all the "pre-WALL-E" films are the greatest of Pixar's
        work, whereas those after it were... well an afterthought (except for
        maybe the first 15 minutes of Up).
      </p>
      <p>
        But are they right? Is there a way to tell if there is a decline in
        Pixar films after 2008? Or more generally...
      </p>
      <h3>Has perception of Pixar films gotten worse?</h3>
      <p>
        To see if this is the case, we will dive into several metrics:
      </p>
      <ul>
        <li>1. Originality</li>
        <li>2. Box Office Returns</li>
        <li>3. Audience Reception</li>
        <li>4. Critical Acclaim</li>
      </ul>
      <p>
        And at the very end, we'll let YOU decide which of these factors are
        important!
      </p>
      <p>
        But before we get into the Pixar movie metrics, we have another question
        to address:
      </p>
      <h3>Is Pixar's perceived decline unique, or part of broader industry trends?</h3>
      <p>
        We could conclude that Pixar films are getting worse, but that doesn't
        mean much if the general state of cinema is in decline. To mitigate
        this, some of our metrics will have comparison "baselines" to illustrate
        what the "standard" value of the metric was at the time.
      </p>
      <div class="container">
        <div class="controls">
          <label for="window-size">Trend Line Window:</label>
          <select id="window-size">
            <option value="3">3 Years</option>
            <option value="5">5 Years</option>
            <option value="7">7 Years</option>
          </select>
        </div>

        <div id="chart-container"></div>
      </div>
      <br><br />
      <br />
      <div class="reveal-container">
        <!-- Box Office Section -->
        <div class="hover-bar" id="revealBoxOffice">Box Office</div>
        <div id="visualization-wrapper-boxoffice" class="viz-wrapper">
          <div id="visualization"></div>
        </div>

        <!-- Originality Section -->
        <div class="hover-bar" id="revealOriginality">Originality</div>
        <div id="visualization-wrapper-originality" class="viz-wrapper">
          <div id="originality"></div>
        </div>

        <!-- Critical Reception Section -->
        <div class="hover-bar" id="revealCritical">Critical Reception</div>
        <div id="visualization-wrapper-critical" class="viz-wrapper">
          <div id="critical"></div>
          <input
            type="checkbox"
            class="awardCategory"
            id="originalScreenplay"
            checked
          />
          <label for="originalScreenplay">Original Screenplay</label>
          <input
            type="checkbox"
            class="awardCategory"
            id="animatedFeature"
            checked
          />
          <label for="animatedFeature">Animated Feature</label>
          <input
            type="checkbox"
            class="awardCategory"
            id="originalScore"
            checked
          />
          <label for="originalScore">Original Score</label>
          <input
            type="checkbox"
            class="awardCategory"
            id="originalSong"
            checked
          />
          <label for="originalSong">Original Song</label>
          <input
            type="checkbox"
            class="awardCategory"
            id="soundEditing"
            checked
          />
          <label for="soundEditing">Sound Editing</label>
          <input
            type="checkbox"
            class="awardCategory"
            id="soundMixing"
            checked
          />
          <label for="soundMixing">Sound Mixing</label>
          <input
            type="checkbox"
            class="awardCategory"
            id="bestPicture"
            checked
          />
          <label for="bestPicture">Best Picture</label>
          <input
            type="checkbox"
            class="awardCategory"
            id="adaptedScreenplay"
            checked
          />
          <label for="adaptedScreenplay">Adapted Screenplay</label>
        </div>

        <!-- Audience Reception Section -->
        <div class="hover-bar" id="revealAudience">Audience Reception</div>
        <div id="visualization-wrapper-audience" class="viz-wrapper">
          <div id="audience-chart"></div>
        </div>

        <!-- You Decide Section -->
        <div class="hover-bar" id="revealYouDecide">You Decide</div>
        <div id="visualization-wrapper-youdecide" class="viz-wrapper">
          <div style="display: flex">
            <div style="display: flex">
              <div id="you-decide-viz" style="flex: 3; min-width: 700px"></div>
              <div
                id="you-decide-controls"
                style="
                  flex: 0 0 300px; /* always 300 px wide */
                  margin-left: 20px;
                  max-height: 580px; /* same as chart height minus some padding */
                  overflow-y: auto; /* vertical scroll if content is taller */
                "
              ></div>
            </div>
          </div>
        </div>
      </div>
      <h3>You Decide: What Makes a Great Pixar Movie?</h3>
      <p>
        This interactive chart invites you to define what you believe makes a Pixar movie truly magical.
        Using a set of customizable sliders, you can assign importance to different factors like 
        box office success, critical reception, originality, and awards recognition.
      </p>
      <p>
        Each film is assigned a <strong>Magic Score</strong> based on your personal weighting of these metrics:
        <ul style="margin-top: 6px; margin-bottom: 6px; padding-left: 20px;">
          <li><strong>Box Office Performance</strong> — total worldwide gross sales</li>
          <li><strong>Opening Weekend</strong> — early momentum and excitement</li>
          <li><strong>Rotten Tomatoes, IMDb, Metacritic Ratings</strong> — ratings across three major players</li>
          <li><strong>Originality</strong> — whether the film is an original story or a sequel</li>
          <li><strong>Awards Recognition</strong> — number and prestige of awards</li>
        </ul>
      </p>
      <p>
        The <strong>Magic Score</strong> is dynamically recalculated as you adjust the sliders, letting you explore 
        how different priorities (like critical acclaim vs originality) affect which movies rise to the top.
      </p>
      <p style="font-style: italic;">
        Expand a bar to view detailed information about the movie, including its trailer, critical scores, and plot summary.
      </p>
      <div style="height: 500px"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script type="module" src="plots/index_script.js"></script>
    <script type="module" src="plots/originality.js"></script>
    <script type="module" src="plots/you_decide.js"></script>
    <script type="module" src="plots/critical_reception.js"></script>
    <script type="module" src="plots/pixar_dreamworks.js"></script>
    <script type="module" src="plots/timeline.js"></script>
    <script type="module" src="plots/audience_reception.js"></script>

    <div
      id="tooltip"
      style="
        position: absolute;
        background: white;
        border: 1px solid #ccc;
        padding: 5px 10px;
        font-size: 12px;
        pointer-events: none;
        opacity: 0;
        border-radius: 4px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
      "
    ></div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const toggleReveal = (barId, wrapperId) => {
          const bar = document.getElementById(barId);
          const wrapper = document.getElementById(wrapperId);

          if (bar && wrapper) {
            bar.addEventListener("click", () => {
              wrapper.classList.toggle("revealed");
            });

            wrapper.classList.toggle("revealed");
          }
        };

        toggleReveal("revealBoxOffice", "visualization-wrapper-boxoffice");
        toggleReveal("revealOriginality", "visualization-wrapper-originality");
        toggleReveal("revealYouDecide", "visualization-wrapper-youdecide");
        toggleReveal("revealCritical", "visualization-wrapper-critical");
        toggleReveal("revealAudience", "visualization-wrapper-audience");
      });
      document
        .getElementById("window-size")
        .addEventListener("change", function () {
          const windowSize = parseInt(this.value);
          document.getElementById("window-size-text").textContent = windowSize;

          // Clear previous chart
          document.getElementById("chart-container").innerHTML = "";

          // Re-load the chart with the new window size
          // The main JS file will read this value when creating the chart
          // d3.csv("data/merged_movie_data.csv").then((data) => {
          //   // The main chart code will run again from pixar-dreamworks-chart.js
          // }).catch(error => {
          //   console.error('Error reloading data:', error);
          // });
        });
    </script>

      <h1>Pixar Visualization Writeup</h1>

      <h2>Introduction</h2>
      <p>This project explores the evolution of Pixar films over time, examining whether there has been a decline in their quality, popularity, or cultural impact. 
        The motivation for this study is the widespread perception that Pixar's early films were superior to their more recent releases. 
        We aim to explore this perception by visualizing key metrics of Pixar movies, such as box office revenue, audience reception, critical acclaim, and originality, 
        and providing users with an interactive interface to draw their own conclusions.</p>

      <h2>Related Work</h2>
      <p>Prior studies on film industry trends have focused on various factors like box office earnings, critical ratings, 
        and audience reviews to analyze the performance and impact of movies over time. Existing visualizations of 
        movie data often use static charts, but our approach adds a dynamic, user-interactive element that allows 
        users to explore individual movies and their associated metrics in greater detail.</p>

      <h2>Methodology</h2>
      <p>We used a dataset of Pixar movies containing key attributes such as movie title, release year, 
        total worldwide gross sales, director, genre, rating, Rotten Tomatoes score, and a YouTube trailer link. 
        The data was cleaned and processed using D3.js, where monetary values were converted to numeric format for accurate plotting. 
        We designed a bar chart that displays each movie’s total worldwide gross revenue, with user interactions allowing for 
        the expansion of bars to reveal detailed information about each movie.</p>

      <h2>Design</h2>
      <p>We chose a bar chart because it effectively communicates the comparative performance of movies over time. 
        We added interaction features, allowing users to click on a bar to see detailed information about the selected movie, 
        including a trailer video, director, genre, and critical ratings. This design enhances user engagement and 
        provides contextual insights.</p>

      <h2>Implementation</h2>
      <p>The visualization was built using D3.js for data binding and interaction management, with HTML and CSS for layout 
        and styling. We leveraged D3’s data-driven approach to create dynamic elements, enabling smooth transitions for 
        expanding and collapsing bars. The interactive design was further enhanced with tooltips that display detailed movie information. 
        Performance was optimized by using event delegation and limiting DOM updates during user interactions.</p>

      <h2>Discussion</h2>
      <p>The final visualization effectively highlights the differences in box office performance among Pixar movies 
        and provides an engaging way for users to explore detailed information about each film. Audience feedback was positive, 
        with users appreciating the ability to quickly access details without leaving the visualization. However, some users 
        found the expanding bar interaction confusing at first, suggesting a need for clearer visual cues. The system enables 
        users to easily identify trends in Pixar's movie performance and gain insights into the potential decline in quality over time.</p>

      <h2>Future Work</h2>
      <p>We plan to enhance the visualization by adding user-adjustable weighting for different metrics (box office, 
        critical ratings, originality, etc.), allowing users to explore different interpretations of movie quality. 
        Additionally, incorporating comparison data for other animation studios, such as DreamWorks, could provide 
        broader industry context.</p>

      <h2>Acknowledgements</h2>
      <p>This project was built using D3.js and JavaScript. The data was sourced from the Pixar movie dataset, 
        and additional support was provided through guidance and feedback from peers.</p>

    </body>
</html>